<nav class="sidebar" (mouseenter)="onMouseEnter()" (mouseleave)="onMouseLeave()">
  <div
    class="item"
    (mouseenter)="onMouseEnterLibrary()"
    (mouseleave)="onMouseLeaveLibrary()"
    (click)="goToPlaylistHome($event)"
  >
    <span class="icon"><iconify-icon class="headphones" icon="teenyicons:headphones-outline"></iconify-icon></span>
    <span class="label">Biblioteca</span>
<!-- Esto de aquí hay que cambiarlo no tiene sentido que sólo puedas acceder 
     a las listas cuando la barra lateral esté abierta, si pinchas el icono deberías 
     poder acceder al panel de playslist -->
    @if (isLibraryMenuOpen && isExpanded) {
    <div class="submenu library-submenu" (click)="$event.stopPropagation()">
      <button class="submenu-action" type="button" (click)="goToPlaylistHome($event)">
        Crear listas
      </button>

      @if (isLoggedIn) {
      <div class="submenu-playlist-scroll">
        @for (playlist of playlists(); track playlist.id) {
        <button class="submenu-item" type="button" (click)="openPlaylist(playlist.id, $event)">
          <span>{{ playlist.listName }}</span>
          <small>{{ playlist.songCount }}</small>
        </button>
        } @empty {
        <span class="submenu-empty">Sin listas creadas</span>
        }
      </div>
      }
    </div>
    }
  </div>
<!-- Solo visible si el usuario ha iniciado sesión -->
  @if (isLoggedIn) {
  <div class="item" routerLink="/profile">
    <span class="icon"><iconify-icon class="alien" icon="teenyicons:alien-outline"></iconify-icon></span>
    <span class="label">Perfil</span>
  </div>
  }
</nav>
