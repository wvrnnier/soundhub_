<nav class="sidebar" (mouseenter)="onMouseEnter()" (mouseleave)="onMouseLeave()">
  <div
    class="item"
    (mouseenter)="onMouseEnterLibrary()"
    (mouseleave)="onMouseLeaveLibrary()"
    (click)="goToPlaylistHome($event)"
  >
    <span class="icon">*</span>
    <span class="label">Biblioteca</span>

    @if (isLibraryMenuOpen && isExpanded) {
    <div class="submenu library-submenu" (click)="$event.stopPropagation()">
      <button class="submenu-action" type="button" (click)="goToPlaylistHome($event)">
        Crear listas
      </button>

      @if (isLoggedIn) {
      @for (playlist of playlists(); track playlist.id) {
      <button class="submenu-item" type="button" (click)="openPlaylist(playlist.id, $event)">
        <span>{{ playlist.listName }}</span>
        <small>{{ playlist.songCount }}</small>
      </button>
      } @empty {
      <span class="submenu-empty">Sin listas creadas</span>
      }
      }
    </div>
    }
  </div>
<!-- Solo visible si el usuario ha iniciado sesiÃ³n -->
  @if (isLoggedIn) {
  <div class="item" routerLink="/profile">
    <span class="icon">*</span>
    <span class="label">Perfil</span>
  </div>
  }
</nav>
